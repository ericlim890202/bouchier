!function(){"use strict";function e(e,t,r,o,a,d,i,s,l,p,c,u,n){var m=e;m.orderDetails=p.cart(),m.removeFromCart=function(e){p.removeItem(e),m.openModal.hide()},m.confirmOrder=function(){m.orderDetails.items.length>0&&((void 0==m.orderDetails.pickUpDate||""==m.orderDetails.pickUpDate&&void 0==m.orderDetails.store||""==m.orderDetails.store)&&alert("You must choose both a pickup date and store!"),(void 0!=m.orderDetails.pickUpDate&&""!=m.orderDetails.pickUpDate&&void 0!=m.orderDetails.customerID||""!=m.orderDetails.customerID&&void 0!=m.orderDetails.store&&""!=m.orderDetails.store)&&("City"==m.orderDetails.store&&(m.orderDetails.orderNumber="X"+m.orderDetails.store.charAt(0)+"-"+m.orderDetails.pickUpDate+"-"+m.selectedCustomer.lname+"-"+m.citypud[m.orderDetails.pickUpDate]),"Toorak"==m.orderDetails.store&&(m.orderDetails.orderNumber="X"+m.orderDetails.store.charAt(0)+"-"+m.orderDetails.pickUpDate+"-"+m.selectedCustomer.lname+"-"+m.toorakpud[m.orderDetails.pickUpDate]),"Deli"==m.orderDetails.store&&(m.orderDetails.orderNumber="X"+m.orderDetails.store.charAt(0)+"-"+m.orderDetails.pickUpDate+"-"+m.selectedCustomer.lname+"-"+m.delipud[m.orderDetails.pickUpDate]),m.orderDetails.complete=!1,l.post(p.cart()),a.transitionTo("app.order-confirmation"))),void 0!=m.orderDetails.customerID&&""!=m.orderDetails.customerID||alert("This session has expired, please abandon order and start again."),(m.orderDetails.items.length<=0||void 0==m.orderDetails.items.length)&&alert("You have no items in your cart!")},m.orderOwnerFilter=function(e){var t={};return angular.forEach(m.customers,function(e){e._id==m.orderDetails.customerID&&(t=e)}),t},m.stores=["Toorak","City","Deli"],m.citypud=[],m.toorakpud=[],m.delipud=[],m.pickupdates=[{date:"16"},{date:"17"},{date:"18"},{date:"19"},{date:"20"},{date:"21"},{date:"22"},{date:"23"},{date:"24"}],m.citypud[16]=0,m.citypud[17]=0,m.citypud[18]=0,m.citypud[19]=0,m.citypud[20]=0,m.citypud[21]=0,m.citypud[22]=0,m.citypud[23]=0,m.citypud[24]=0,m.toorakpud[16]=0,m.toorakpud[17]=0,m.toorakpud[18]=0,m.toorakpud[19]=0,m.toorakpud[20]=0,m.toorakpud[21]=0,m.toorakpud[22]=0,m.toorakpud[23]=0,m.toorakpud[24]=0,m.delipud[16]=0,m.delipud[17]=0,m.delipud[18]=0,m.delipud[19]=0,m.delipud[20]=0,m.delipud[21]=0,m.delipud[22]=0,m.delipud[23]=0,m.delipud[24]=0,l.getList().then(function(e){m.orders=e,angular.forEach(e,function(e){"City"==e.store&&(m.citypud[Number(e.pickUpDate)]+=1),"Toorak"==e.store&&(m.toorakpud[Number(e.pickUpDate)]+=1),"Deli"==e.store&&(m.delipud[Number(e.pickUpDate)]+=1)})}),m.category=i._id,void 0!=m.category&&s.all("db/products/"+m.category).getList("vm.category").then(function(e){m.products=e}),u.getList().then(function(e){m.customers=e,angular.forEach(m.customers,function(e){e._id==m.orderDetails.customerID&&(m.selectedCustomer=e)})}),m.cancelModal=c({scope:m,templateUrl:"apps/modals/cancelModal.html",show:!1,animation:"am-fade-and-slide-top",placement:"center"}),void 0==m.orderDetails.customerID&&(m.expired=!0,m.cancelModal.$promise.then(m.cancelModal.show)),m.confirmExpiredSess=function(){n.remove("order"),a.transitionTo("app.select-order"),m.cancelModal.hide()},m.openModal=c({scope:m,templateUrl:"apps/orders/modals/deleteModal.html",show:!1,animation:"am-fade-and-slide-top",placement:"center"}),m.showModal=function(e){m.modalItem=e,m.openModal.$promise.then(m.openModal.show)}}angular.module("app").controller("orderSumCtrl",e),e.$inject=["$scope","$http","$filter","$aside","$state","$rootScope","$stateParams","Restangular","Orders","order","$modal","Customers","$cookies"]}();