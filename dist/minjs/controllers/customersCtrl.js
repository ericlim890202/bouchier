!function(){"use strict";function e(e,t,o,s,n,m,r){var u=e;t.getList().then(function(e){u.customers=e,m.getList().then(function(e){u.orders=e}),u.editCustomer=function(e){u.newCustomer=e,u.isCustomerNew=!1,u.showCustomerModal()},u.addCustomer=function(){u.newCustomer={},u.isCustomerNew=!0,u.showCustomerModal()},u.saveCustomer=function(){t.post(u.newCustomer).then(function(){t.getList().then(function(e){u.customers=e,angular.forEach(u.orders,function(e){e.customerID==u.newCustomer._id&&(e.customerName=u.newCustomer.fname+" "+u.newCustomer.lname,m.post(e).then(function(){m.getList().then(function(e){u.orders=e})}))}),u.customerModal.hide()})})},u.removeCustomer=function(e){u.customers.remove(e).then(function(){t.getList().then(function(e){u.customers=e,u.deleteCustModal.hide()})})},u.pageSize=10,u.currentPage=1,u.customerModal=o({scope:u,templateUrl:"apps/admin/modals/newCustomerModal.html",show:!1,animation:"am-fade-and-slide-top",placement:"center"}),u.showCustomerModal=function(e){u.modalItem=e,u.customerModal.$promise.then(u.customerModal.show)},u.deleteCustModal=o({scope:u,templateUrl:"apps/admin/modals/deleteCustomerModal.html",show:!1,animation:"am-fade-and-slide-top",placement:"center"}),u.showDeleteCustModal=function(e){u.modalItem=e,u.deleteCustModal.$promise.then(u.deleteCustModal.show)}})}angular.module("app").controller("customersCtrl",e),e.$inject=["$scope","Customers","$modal","$state","$stateParams","Orders","$http"]}();