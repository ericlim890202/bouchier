!function(){"use strict";function e(e,t,r,o,n,a,u,i,m,c){function d(){p.filteredOrders=m("filter")(p.orders,c.pickUpDate),p.summary=[],p.productName=[],p.unitsName=[],p.productSummary=[]}function s(){angular.forEach(p.filteredOrders,function(e){angular.forEach(e.items,function(e){var t=Number(e.weightQty)?Number(e.weightQty):0,r=Number(e.unitQty)?Number(e.unitQty):0,o=(Number(e.totalWeight)&&Number(e.totalWeight),p.summary.indexOf(e.code));p.summaryp[o]+=t+r})}),angular.forEach(p.summaryp,function(e,t){var r="";p.products[t].byWeight&&(r="kg"),e>0&&p.productSummary.push({code:p.summary[t],title:p.products[t].title,qty:e,unit:r})}),"product-summary-print"==n.current.name&&d(),"app.product-summary"==n.current.name&&(c.pickUpDate="")}var p=e;p.today=new Date,p.filterOrders=d,p.printPage=function(){window.print()},p.goBack=function(){window.history.go(-1)},p.summary=[],p.summaryp=[],p.productName=[],p.productSummary=[],p.orderType="1",t.getList().then(function(e){p.orders=p.filteredOrders=e,u.getList().then(function(e){p.customers=e}),i.getList().then(function(e){p.products=e,angular.forEach(e,function(e){p.summary.push(e.code),p.summaryp.push(0)}),s()}),p.pickupdates=["16","17","18","19","20","21","22","23","24"],p.store=["Toorak","City","Deli"],p.removeOrder=function(e){p.orders.remove(e).then(function(){t.getList().then(function(e){p.orders=e,p.openDeleteModal.hide()})})},p.filterOrderID=function(e){var t="";return angular.forEach(p.customers,function(r){r._id==e&&(t=r.fname+" "+r.lname)}),t},p.pageSize=10,p.currentPage=1,p.changePageSize=function(){p.pageSize=1e4},p.openDeleteModal=o({scope:p,templateUrl:"apps/admin/modals/deleteOrderModal.html",show:!1,animation:"am-fade-and-slide-top",placement:"center"}),p.deleteProductModal=function(e){p.modalItem=e,p.openDeleteModal.$promise.then(p.openDeleteModal.show)}})}angular.module("app").controller("productSummaryCtrl",e),e.$inject=["$scope","Orders","order","$modal","$state","$stateParams","Customers","Products","$filter","$rootScope"]}();